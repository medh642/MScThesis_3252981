[
  {
    "id": 1,
    "prompt": "How do I load a vector layer in QGIS using PyQGIS?",
    "response": "from qgis.core import QgsVectorLayer, QgsProject\nlayer = QgsVectorLayer('/path/to/data.shp', 'My Layer', 'ogr')\nif layer.isValid():\n    QgsProject.instance().addMapLayer(layer)\n    print('Layer loaded successfully!')\nelse:\n    print('Failed to load layer.')",
    "metadata": {
      "module": "qgis.core",
      "tags": ["vector", "layer", "load"],
      "version": "3.34"
    }
  },
  {
    "id": 2,
    "prompt": "How can I access the active layer in the QGIS interface using PyQGIS?",
    "response": "from qgis.utils import iface\nlayer = iface.activeLayer()\nprint(layer.name())",
    "metadata": {
      "module": "qgis.utils",
      "tags": ["iface", "layer", "active"],
      "version": "3.34"
    }
  },
  {
    "id": 3,
    "prompt": "How to iterate through features in a vector layer?",
    "response": "for feature in layer.getFeatures():\n    print(feature.id(), feature['attribute_name'])",
    "metadata": {
      "module": "qgis.core",
      "tags": ["features", "iteration", "vector"],
      "version": "3.34"
    }
  },
  {
    "id": 4,
    "prompt": "How can I filter features using a query expression in PyQGIS?",
    "response": "from qgis.core import QgsFeatureRequest\nrequest = QgsFeatureRequest().setFilterExpression('\"population\" > 1000')\nfor feature in layer.getFeatures(request):\n    print(feature['name'])",
    "metadata": {
      "module": "qgis.core",
      "tags": ["filter", "expression", "features"],
      "version": "3.34"
    }
  },
  {
    "id": 5,
    "prompt": "How to create a memory layer in PyQGIS?",
    "response": "from qgis.core import QgsVectorLayer, QgsField, QgsFields, QgsFeature\nlayer = QgsVectorLayer('Point?crs=EPSG:4326', 'temporary_points', 'memory')\nprovider = layer.dataProvider()\nprovider.addAttributes([QgsField('name', 10)])\nlayer.updateFields()",
    "metadata": {
      "module": "qgis.core",
      "tags": ["memory", "layer", "temporary"],
      "version": "3.34"
    }
  },
  {
    "id": 6,
    "prompt": "How can I buffer geometries in PyQGIS?",
    "response": "from qgis.core import QgsGeometry\nfor feature in layer.getFeatures():\n    geom = feature.geometry()\n    buffer = geom.buffer(100, 5)\n    print(buffer.asWkt())",
    "metadata": {
      "module": "qgis.core",
      "tags": ["geometry", "buffer", "spatial"],
      "version": "3.34"
    }
  },
  {
    "id": 7,
    "prompt": "How to reproject a vector layer to a different CRS?",
    "response": "from qgis.core import QgsCoordinateReferenceSystem, QgsVectorFileWriter\ncrs = QgsCoordinateReferenceSystem('EPSG:3857')\nQgsVectorFileWriter.writeAsVectorFormat(layer, 'reprojected.shp', 'UTF-8', crs, 'ESRI Shapefile')",
    "metadata": {
      "module": "qgis.core",
      "tags": ["reprojection", "crs", "vector"],
      "version": "3.34"
    }
  },
  {
    "id": 8,
    "prompt": "How can I clip a vector layer by another layer in PyQGIS?",
    "response": "import processing\nparams = {'INPUT': 'input.shp', 'OVERLAY': 'clip_layer.shp', 'OUTPUT': 'clipped.shp'}\nprocessing.run('native:clip', params)",
    "metadata": {
      "module": "processing",
      "tags": ["clip", "overlay", "analysis"],
      "version": "3.34"
    }
  },
  {
    "id": 9,
    "prompt": "How to export attribute table to CSV in PyQGIS?",
    "response": "import csv\nwith open('attributes.csv', 'w', newline='') as f:\n    writer = csv.writer(f)\n    writer.writerow([field.name() for field in layer.fields()])\n    for feat in layer.getFeatures():\n        writer.writerow(feat.attributes())",
    "metadata": {
      "module": "qgis.core",
      "tags": ["export", "csv", "attributes"],
      "version": "3.34"
    }
  },
  {
    "id": 10,
    "prompt": "How to access and change map canvas extent in QGIS using PyQGIS?",
    "response": "from qgis.utils import iface\ncanvas = iface.mapCanvas()\nextent = canvas.extent()\nprint(extent.toString())",
    "metadata": {
      "module": "qgis.utils",
      "tags": ["canvas", "extent", "map"],
      "version": "3.34"
    }
  },
  {
    "id": 11,
    "prompt": "How to calculate the area of polygons in a layer?",
    "response": "for feature in layer.getFeatures():\n    area = feature.geometry().area()\n    print(f'Feature {feature.id()} area: {area}')",
    "metadata": {
      "module": "qgis.core",
      "tags": ["area", "polygon", "geometry"],
      "version": "3.34"
    }
  },
  {
    "id": 12,
    "prompt": "How can I add a new field to an existing layer?",
    "response": "from qgis.core import QgsField\nlayer.dataProvider().addAttributes([QgsField('new_field', 10)])\nlayer.updateFields()",
    "metadata": {
      "module": "qgis.core",
      "tags": ["field", "attribute", "edit"],
      "version": "3.34"
    }
  },
  {
    "id": 13,
    "prompt": "How to symbolize a layer using categorized renderer?",
    "response": "from qgis.core import QgsCategorizedSymbolRenderer, QgsRendererCategory, QgsSymbol\ncategories = []\nfor value in ['A', 'B', 'C']:\n    symbol = QgsSymbol.defaultSymbol(layer.geometryType())\n    category = QgsRendererCategory(value, symbol, str(value))\n    categories.append(category)\nrenderer = QgsCategorizedSymbolRenderer('field_name', categories)\nlayer.setRenderer(renderer)\nlayer.triggerRepaint()",
    "metadata": {
      "module": "qgis.core",
      "tags": ["symbology", "renderer", "visualization"],
      "version": "3.34"
    }
  },
  {
    "id": 14,
    "prompt": "How can I merge multiple vector layers?",
    "response": "import processing\nparams = {'LAYERS': ['layer1.shp', 'layer2.shp'], 'OUTPUT': 'merged.shp'}\nprocessing.run('native:mergevectorlayers', params)",
    "metadata": {
      "module": "processing",
      "tags": ["merge", "vector", "layers"],
      "version": "3.34"
    }
  },
  {
    "id": 15,
    "prompt": "How to create a hillshade raster from DEM in PyQGIS?",
    "response": "import processing\nparams = {'INPUT': 'dem.tif', 'Z_FACTOR': 1, 'AZIMUTH': 300, 'ALTITUDE': 40, 'OUTPUT': 'hillshade.tif'}\nprocessing.run('gdal:hillshade', params)",
    "metadata": {
      "module": "processing",
      "tags": ["hillshade", "raster", "gdal"],
      "version": "3.34"
    }
  },
  {
    "id": 16,
    "prompt": "How can I perform spatial join between two vector layers?",
    "response": "import processing\nparams = {'INPUT': 'points.shp', 'JOIN': 'polygons.shp', 'PREDICATE': [0], 'JOIN_FIELDS': [], 'OUTPUT': 'joined.shp'}\nprocessing.run('native:joinattributesbylocation', params)",
    "metadata": {
      "module": "processing",
      "tags": ["spatial join", "vector", "analysis"],
      "version": "3.34"
    }
  },
  {
    "id": 17,
    "prompt": "How do I get the CRS of a layer?",
    "response": "print(layer.crs().authid())",
    "metadata": {
      "module": "qgis.core",
      "tags": ["crs", "projection", "metadata"],
      "version": "3.34"
    }
  },
  {
    "id": 18,
    "prompt": "How to save a memory layer as a shapefile?",
    "response": "from qgis.core import QgsVectorFileWriter\nQgsVectorFileWriter.writeAsVectorFormat(layer, 'saved_layer.shp', 'UTF-8', driverName='ESRI Shapefile')",
    "metadata": {
      "module": "qgis.core",
      "tags": ["save", "export", "memory"],
      "version": "3.34"
    }
  },
  {
    "id": 19,
    "prompt": "How can I compute centroids of polygons?",
    "response": "for feature in layer.getFeatures():\n    centroid = feature.geometry().centroid()\n    print(centroid.asWkt())",
    "metadata": {
      "module": "qgis.core",
      "tags": ["centroid", "geometry", "polygon"],
      "version": "3.34"
    }
  },
  {
    "id": 20,
    "prompt": "How can I run a QGIS processing algorithm and get the output layer?",
    "response": "import processing\nresult = processing.run('native:buffer', {'INPUT': 'roads.shp', 'DISTANCE': 50, 'OUTPUT': 'buffered.shp'})\nprint(result['OUTPUT'])",
    "metadata": {
      "module": "processing",
      "tags": ["processing", "algorithm", "output"],
      "version": "3.34"
    }
  }
]
